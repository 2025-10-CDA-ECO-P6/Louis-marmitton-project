@url = http://localhost:3000

@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzYzMTE2OTgwLCJleHAiOjE3NjU3MDg5ODB9.RiRhMLoHroSZsX-zctFdarHs5OWMguUo3IXiqrQaMgc

### Fetch recipe data from external API (HTML response to parse)
GET https://encuisine.adrienrossignol.fr/recette/42
Accept: text/html

# L'indicqteur de budget, temps de prepartion et difficulte figure dans la page html sous forme d'icones a compterr
# temps_rouge.svg = 2 icones = 2
# difficulte_rouge.svg = 2 icones = 2
# budget_rouges.svg = 2 icone = 2


### Athenticate and obtain JWT token or signup new user
### This step is optional if you already have a valid token

### Create new user
POST {{url}}/api/auth/local/register
Content-Type: application/json

{
  "username": "foobar",
  "email": "foobar@example.com",
  "password": "foobarpassword"
}

### Authenticate existing user

POST {{url}}/api/auth/local
Content-Type: application/json

{
  "identifier": "foobar@example.com",
  "password": "foobarpassword"
}

# ============================================
# RECIPES ROUTES
# ============================================

### Create new recipe with Strapi-style format
POST {{url}}/api/recipes
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "titre": "Gnocchi aux champignons et à la feta",
    "temps_de_preparation": 1,
    "difficulte": 1,
    "budget": 1,
    "description": "Essuyez les champignons et coupez-les en lamelles.Dans une poêle bien chaude, faites fondre une noisette de beurre. Faites revenir les gnocchi 2 minutes jusqu'à ce qu'ils soient bien dorés.."
  }
}

### Get all recipes with pagination (page 1, 10 items per page)
GET {{url}}/api/recipes?page=1&pageSize=10
Accept: application/json
Authorization: Bearer {{token}}

###

### Get all recipes with population
GET {{url}}/api/recipes?populate=ingredients
Accept: application/json
Authorization: Bearer {{token}}

###

### Get specific recipe by ID (using regular id)
GET {{url}}/api/recipes
Accept: application/json
Authorization: Bearer {{token}}

###

### Get specific recipe by documentId (Strapi v5 style)
GET {{url}}/api/recipes/recipe_5
Accept: application/json
Authorization: Bearer {{token}}

###

### Filter recipes by budget with pagination
GET {{url}}/api/recipes?filters[budget][$eq]=3&page=1&pageSize=5
Accept: application/json
Authorization: Bearer {{token}}

###

### Get recipe with populated ingredients (using documentId)
GET {{url}}/api/recipes/recipe_5?populate=*
Accept: application/json
Authorization: Bearer {{token}}

### Update specific recipe by documentId (Strapi v5 style)
PUT {{url}}/api/recipes/recipe_1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "description": "Mise a jour de la description de la recette."
  }
}

###

### Update specific recipe by regular ID (backwards compatible)
PUT {{url}}/api/recipes/1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "description": "Mise a jour de la description de la recette."
  }
}

###

### Delete specific recipe by documentId (Strapi v5 style)
DELETE {{url}}/api/recipes/recipe_1
Accept: application/json
Authorization: Bearer {{token}}

###

### Delete specific recipe by ID (backwards compatible)
DELETE {{url}}/api/recipes/1
Accept: application/json
Authorization: Bearer {{token}}

###
# ============================================
# INGREDIENTS ROUTES
# ============================================

### Get all ingredients with pagination
GET {{url}}/api/ingredients?page=1&pageSize=10
Accept: application/json
Authorization: Bearer {{token}}

###

### Get all ingredients with recipe population
GET {{url}}/api/ingredients?populate=recipes
Accept: application/json
Authorization: Bearer {{token}}

###

### Get specific ingredient by ID
GET {{url}}/api/ingredients/1
Accept: application/json
Authorization: Bearer {{token}}

###

### Get specific ingredient by documentId (Strapi v5 style)
GET {{url}}/api/ingredients/ingredient_1
Accept: application/json
Authorization: Bearer {{token}}

###

### Get specific ingredient by documentId with populated recipes
GET {{url}}/api/ingredients/ingredient_1?populate=*
Accept: application/json
Authorization: Bearer {{token}}

###

### Create new ingredient with Strapi-style format
POST {{url}}/api/ingredients
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "name": "Champignon"
  }
}

###

### Update specific ingredient by documentId (Strapi v5 style)
PUT {{url}}/api/ingredients/ingredient_1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "name": "Patate douce"
  }
}

###

### Update specific ingredient by ID (backwards compatible)
PUT {{url}}/api/ingredients/1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "data": {
    "name": "Patate douce"
  }
}

###

### Delete specific ingredient by documentId (Strapi v5 style)
DELETE {{url}}/api/ingredients/ingredient_1
Accept: application/json
Authorization: Bearer {{token}}

###

### Delete specific ingredient by ID (backwards compatible)
DELETE {{url}}/api/ingredients/1
Accept: application/json
Authorization: Bearer {{token}}

###
# ============================================
# RECIPE-INGREDIENTS RELATIONSHIP ROUTES
# ============================================

### Get all ingredients for a specific recipe
GET {{url}}/api/recipe-ingredients/recipe/1/ingredients
Accept: application/json
Authorization: Bearer {{token}}

###

### Get all recipes using a specific ingredient
GET {{url}}/api/recipe-ingredients/ingredient/1/recipes
Accept: application/json
Authorization: Bearer {{token}}

###

### Add a single ingredient to a recipe
POST {{url}}/api/recipe-ingredients/recipe/5/ingredient/1
Authorization: Bearer {{token}}

###

### Add multiple ingredients to a recipe at once
POST {{url}}/api/recipe-ingredients/recipe/1/ingredients
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "ingredientIds": [1]
}

###

### Remove a specific ingredient from a recipe
DELETE {{url}}/api/recipe-ingredients/recipe/1/ingredient/2
Authorization: Bearer {{token}}

###

### Remove all ingredients from a recipe
DELETE {{url}}/api/recipe-ingredients/recipe/1/ingredients
Authorization: Bearer {{token}}
